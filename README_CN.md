# ModMergerTool

**中文 | [English](README.md)**

## 游戏模组合并工具

### 📋 项目简介

**ModMergerTool** 是一个专为消光系列（Dying Light）游戏设计的模组智能合并工具，目前主要是消光困兽和消光2。它能够将多个游戏模组文件（.pak
格式）合并为单一文件，并通过 AST 语法树分析实现脚本文件的智能对比和冲突解决。

### ✨ 主要特性

- 🔀 **智能合并**：支持无限数量的模组文件合并
- 🔧 **路径修正**：基于原版文件对mod中的错误文件路径进行修正
- 🔍 **冲突检测**：使用AST语法树进行深度对比
- 👤 **用户交互**：清晰的命令行界面提示用户选择冲突解决方案
- 📊 **详细统计**：合并后提供详细的处理统计信息
- 🌍 **国际化**：目前支持中文和英文，英文并非我母语，所以如果有语法错误请多包涵，或者在我的GitHub仓库中提交PR。
- 支持scr结构脚本合并和.xml以及.gui文件合并，支持逐行合并与冲突检测功能
- 默认的合并逻辑基于原版文件进行合并，大概能修复一些过期MOD的问题，但是仅限多个MOD中有重名文件的情况下，因为不重复的文件工具会直接复制，不会进行解析。或者你可以尝试使用命令行参数 **-f** 启用全局修复模式，这会花更多的时间，但有可能修复一些过期MOD的兼容性问题。

### 项目简介

我做这个工具的初衷一开始是为了解决我自己使用多个MOD之间的各种冲突问题。

最初，我发现了 **[Unleash The Mods](https://www.nexusmods.com/dyinglightthebeast/mods/140)** 这款工具，虽然也很不错。但是有一些小问题和一些不支持的特性，所以我自己制作了这款全新的工具，基于AST语法树进行脚本分析，能够智能识别代码中冲突的地方，智能进行合并。即使是报错的情况下也不会破坏文件结构。同时，也感谢 **[Unleash The Mods](https://www.nexusmods.com/dyinglightthebeast/mods/140)** 这款工具作者的辛苦付出，我的一些合并思路也参考了他的工具。

因此本工具的基础使用方法也完全兼容 **[Unleash The Mods](https://www.nexusmods.com/dyinglightthebeast/mods/140)**，并且不需要安装任何运行库，直接即可使用。

**工具支持智能合并 .scr, .loot, .def .phx .ppfx 及更多scr语法结构的文件和 .xml 还有 .gui 文件，不局限于常见的player_variables.scr文件的合并，语法解析已经对整个原版data0.pak文件进行过实验，确保没有任何冲突。理论上，只要正确的scr语法的文件，工具都能识别并合并。**

DL1理论上支持，但未经测试，此外还需要通过命令行手动指定基准MOD位置。你可以通过命令行参数-h来显示工具支持的命令行选项。

### 问题反馈

如果你发现了任何问题，请及时反馈给我，并提供你合并的mod信息等等。

### 支持的操作系统

- **Windows 10**
- **Windows 11**
- 其他版本的windows系统未经过测试。

### 🚀 快速开始

#### **1、将工具放到困兽根目录/ph_ft目录下，并创建mods目录，将要合并的mod放入其中**

**准备 mod 文件，mod支持zip、pak、7z等格式**

```bash
# 示例
Dying Light The Beast\ph_ft\mods
├── mod1.pak
├── mod2.pak
└── mod3.pak
```

#### 2. 运行合并程序

```bash
# 双击运行合并工具
```

#### 3. 查看结果

合并后的mod会输出到source目录下的data7.pak文件，如果你有data7.pak。注意，此工具会把旧的覆盖掉。
